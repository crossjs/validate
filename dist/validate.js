/*! validate-0.1.0 2014-02-09 17:09:45 */
define("crossjs/validate/0.1.0/validate",["$","crossjs/class/0.1.0/class","crossjs/class/0.1.0/super","./config"],function(a){"use strict";var b=a("$"),c=a("crossjs/class/0.1.0/class"),d=a("./config"),e=function(a){var b={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};return a.replace(/&(?:lt|gt|amp|quot|apos);/g,function(a){return b[a]})},f=d.elements.join(","),g=d.attributes,h=d.rules,i=d.messages,j=new c({__construct:function(a){var c=this,d=b(a.form);0!==d.length&&(c.rules=a.rules||{},c.messages=a.messages||{},c.pending=0,c.submitted=!1,c.errorElements=b(),c.form=d.attr({novalidate:"novalidate"}).on("submit",function(){return c.submitted?c.checkPending():c.validateForm(),!1}),b.isPlainObject(a.on)&&c.on(a.on),a.eventType&&c.initElements(a.eventType))},initElements:function(a){var c=this;c.form.find(f).off(".validate").on(a+".validate",function(){c.validateElem(b(this))})},validateForm:function(){var a=this;a.errorElements=b(),a.submitted=!0,a.form.find(f).filter(":enabled").each(function(){a.validateElem(b(this))}),a.checkPending()},checkPending:function(){0===this.pending&&(this.submitted=!1,this.isValid()?this.fire("valid"):(this.focusError(),this.fire("error")))},clearErrors:function(){var a=this;a.form.find(f).filter(":enabled").each(function(){a.removeError(b(this))})},validateElem:function(a){var c=this,d=!0,e=a.prop("name"),f=a.val();c.removeError(a),b.each(g,function(b,g){var h=a.attr(g);return void 0===h||null===h||""===h||(h=isNaN(h)?h:+h,d=c.checkRule(e,g,a,f,h))?void 0:!1}),d!==!1&&c.rules[e]&&b.each(c.rules[e],function(b,g){return g=isNaN(g)?g:+g,d=c.checkRule(e,b,a,f,g),d?void 0:!1})},checkRule:function(a,b,c,d,e){var f;return"function"==typeof e?f=e.call(this,c,d):h[b]&&(f=h[b].call(this,c,d,e)),f||this.addError(c,this.getMessage(a,b,e)),f},getMessage:function(a,b,c){var d;return this.messages[a]&&(d=this.messages[a][b]),d||(d=i[b]),d?this.formatMessage(d,c):""},formatMessage:function(a,b){return a.replace(/\{0\}/g,b)},focusError:function(){this.errorElements.length&&this.errorElements.eq(0).focus()},addError:function(a,c){var d=a.data("wrap"),e=a.data("help");d||(d=a.closest(".form-group"),a.data("wrap",d)),e||(e=d.find(".help-block"),0===e.length&&(e=b('<div class="help-block"/>').appendTo(d)),a.data("help",e)),d.addClass("has-error"),e.text(c),this.errorElements=this.errorElements.add(a)},removeError:function(a){var c,d=a.data("wrap"),f=a.data("help");d||(d=a.closest(".form-group"),a.data("wrap",d)),f||(f=d.find(".help-block"),0===f.length&&(f=b('<div class="help-block"/>').appendTo(d)),a.data("help",f)),d.removeClass("has-error"),c=f.data("placeholder"),c?f.html(e(c)):f.empty(),this.errorElements=this.errorElements.not(a)},isValid:function(){return 0===this.pending&&0===this.errorElements.length}});return j.addRule=function(a){b.extend(!0,h,a)},j});